#week-view ng-app="weekView" ng-controller="weekViewController"
  .row
    .col-xs-12.main-box
      .row
        .col-xs-4
          h4
            i.fa.fa-angle-double-left ng-click="func.resetShifts()"
            | {{data.calendarDisplayDate}}
            / | {{states}}
            i.fa.fa-angle-double-right
        .col-xs-7
          .commands-list ng-if="states.showHelp"
            p
              span.command Close all windows:
              br
              span.command Select multiple:
              br
              span.command Clone shift:
            p
              span.keyboard Esc
              br
              span.keyboard Ctrl/Cmd + Click
              br
              span.keyboard Shift + Click(drag)

        .col-xs-1.page-buttons
          .pull-right
            .selected-options ng-if="data.toggledShifts.length > 0"
              h5
                | Selected:
                span
                  |  ({{data.toggledShifts.length}})
              button.btn.btn-info.btn-md ng-class="{'disabled': !states.isSelecting}" ng-click="func.resetSelected()"
                | Deselect all

              button.btn.btn-danger.btn-md ng-class="{'disabled': !states.isSelecting}" ng-click="func.removeShifts(data.toggledShifts)"
                | Delete selected

            i.fa.fa-bars ng-click="states.showMenu = !states.showMenu" ng-class="{'menuOpen': states.showMenu}"

            .page-options ng-if="states.showMenu"
                button.help ng-click="states.showHelp = !states.showHelp" ng-if="!states.showHelp" Show help
                button.help ng-click="states.showHelp = !states.showHelp" ng-if="states.showHelp" Hide help
                button.add ng-click="states.showNewPopup = !states.showNewPopup" Add new shift
                button.reset ng-click="func.resetShifts()" Reset changes
                button.del ng-click="func.deleteAll()" Delete all
                button.summary-button.summary View Summary



      .table-headers
        .staff
          | Staff
        .days ng-repeat="day in data.daysInWeek" data-date="{{day[1]}}"
          | {{day[0]}}
        .trash
          i.fa.fa-trash
      .scrollable
        table.table set-drag='' calendar-listener='' popup-handler='' calendar-setup=''

          tbody
            tr
              td Other Branches

            tr ng-repeat="employee in data.employees" data-employee-id="{{employee.id}}"
              td.employee-name.mark
                span
                  | {{employee.name}}
                br
                small
                  i.fa.fa-clock-o
                  .employee-hours
                    | {{employee.currentWeekHours}}/{{employee.totalHours}} hours
                  i.fa.fa-dollar
                  .employee-cost
                    | {{employee.costPerHour * employee.currentWeekHours}}
                    / | {{employee.costPerHour | currency}}/hour

              td.shift-applicable ng-repeat="day in data.daysInWeek" data-date="{{day[1]}}" ng-model="day" data-employee-id="{{employee.id}}"
              td.rubbish-td ng-if="$first" rowspan="{{data.employees.length}}" ng-click="func.rubbishClicked()" ng-class="{'highlight': (states.isSelecting || states.isDragging) }"
                | Drag here to delete
                br
                i.fa.fa-trash


      | Baseshift:
      |    {{data.baseShift}}
      br
      / h4 Shifts
      | {{data.shifts}}

      = render 'summary'

  .shift-bar.drag shift-bar='' ng-model="shift" ng-repeat="shift in data.shifts" data-length="{{shift.length}}" ng-class="{'selected': data.toggledShifts.indexOf({{shift.id}}) > -1}" data-shift-id="{{shift.id}}"

  .popup.expand-container ng-show="states.showEditPopup"
    h3
      | Edit Shift
      small.pull-right
        i.fa.fa-minus
        i.fa.fa-plus
        i.fa.fa-close ng-click="states.showEditPopup = !states.showEditPopup"

    ng-form.form name="editShiftForm"
      .form-group
        .col-xs-5
          label Role
          select.form-control ng-model="data.shiftCopy.role"
            option ng-repeat="role in data.roles" value="{{role}}"
              | {{role}}
        .col-xs-5.col-xs-offset-2
          label Employee
          select.form-control ng-model="data.shiftCopy.employeeID"
            option ng-repeat="employee in data.employees" value="{{employee.id}}" ng-selected="data.shiftCopy.employeeID == employee.id"
              | {{employee.name}}

      .form-group
        .col-xs-5
          .row
            .col-xs-6
              label
                | Start
                small
                  | (h)
              input.form-control type='text' ng-model="data.shiftCopy.startHour"
            .col-xs-6
              label
                small
                  | (min)
              input.form-control type='text' ng-model="data.shiftCopy.startMin"

        .col-xs-5.col-xs-offset-2
          .row
            .col-xs-6
              label
                | End
                small
                  | (h)
              input.form-control type='text' ng-model="data.shiftCopy.endHour"
            .col-xs-6
              label
                small
                  | (min)
              input.form-control type='text' ng-model="data.shiftCopy.endMin"
      .form-group
        .col-xs-5
          label Date
          input.form-control type='text' ng-model="data.shiftCopy.date"

        .col-xs-5.col-xs-offset-2
          label Break Hours
          input.form-control type='text' ng-model="data.shiftCopy.breakHours"

      .form-group
        .col-xs-6
          button.btn.btn-warning.btn-md ng-disabled="editShiftForm.$pristine" ng-click="func.resetForm()" Reset changes
        .col-xs-6
          button.pull-right.btn.btn-success.btn-md ng-disabled="editShiftForm.$pristine" ng-click="func.updateShift(data.shiftCopy)" Update shift

  = render 'newShiftPopup'